"use strict";(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[715],{6715:function(e,t,r){r.r(t);var n=r(5893),s=r(7294),i=r(3813),o=r(398),a=r.n(o);class l{upload(){return this.loader.file.then(e=>new Promise((t,r)=>{this._initRequest(),this._initListeners(t,r,e),this._sendRequest(e)}))}_initRequest(){let e=this.xhr=new XMLHttpRequest;e.open("POST","http://localhost:9000/volunteer/writeImage",!0),e.responseType="json"}_initListeners(e,t,r){let n=this.xhr;this.loader;let s="파일을 업로드 할 수 없습니다.";n.addEventListener("error",()=>{t(s)}),n.addEventListener("abort",()=>t()),n.addEventListener("load",()=>{let r=n.response;if(!r||r.error)return t(r&&r.error?r.error.message:s);e({default:r.url})})}_sendRequest(e){let t=new FormData;t.append("upload",e),this.xhr.send(t)}constructor(e){this.loader=e}}function u(e){e.plugins.get("FileRepository").createUploadAdapter=e=>new l(e)}t.default=function(e){let{onContent:t,oldContent:r}=e,o=(0,s.useRef)(null);return(0,s.useEffect)(()=>{if(console.log("old: "+r),o.current){let e=o.current;e.setData(r),e.focus()}},[r]),(0,n.jsx)(i.CKEditor,{editor:a(),config:{placeholder:"내용입력해",language:"ko",initialData:r,extraPlugins:[u]},onChange:(e,r)=>{t(r)},onReady:e=>{o.current=e,e.setData(r)}})}}}]);