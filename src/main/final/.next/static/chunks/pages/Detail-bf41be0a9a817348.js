(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[428],{4782:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Detail",function(){return a(4597)}])},4597:function(e,t,a){"use strict";a.r(t);var n=a(5893),l=a(7294),s=a(1163),o=a(5675),i=a.n(o);a(449);var c=a(7066);t.default=()=>{let e=(0,s.useRouter)(),{seq:t}=e.query,[a,o]=(0,l.useState)(null),[r,d]=(0,l.useState)(!1),[h,u]=(0,l.useState)(!1),m=(0,l.useRef)(null),[g,p]=(0,l.useState)(!0),[x,j]=(0,l.useState)(!1);(0,l.useEffect)(()=>{"true"===localStorage.getItem("isLoggedIn")&&d(!0)},[]);let[v,b]=(0,l.useState)(!1),[D,f]=(0,l.useState)(!1),[C,N]=(0,l.useState)(""),[S,k]=(0,l.useState)(""),[_,w]=(0,l.useState)(""),[T,y]=(0,l.useState)(""),[q,E]=(0,l.useState)({});(0,l.useEffect)(()=>{let e=localStorage.getItem("grantType"),t=localStorage.getItem("accessToken"),a=localStorage.getItem("username");a&&e&&t&&(k(e),w(t),y(a)),O(),M()},[t]);let O=()=>{c.Z.post("http://localhost:9000/volunteer/getUpdateBoard",t).then(e=>{o({title:e.data.boardDTO.title,content:e.data.boardDTO.content,seq:e.data.boardDTO.seq,email:e.data.boardDTO.email,name:e.data.boardDTO.name,id:e.data.boardDTO.id,board_time:e.data.boardDTO.board_time,board_lastTime:e.data.boardDTO.board_lastTime,volun_address:e.data.boardDTO.volun_address,volun_institution:e.data.boardDTO.volun_institution,volun_date:e.data.boardDTO.volun_date})}).catch(e=>console.log(e))},[F,I]=(0,l.useState)([]),M=()=>{console.log("코멘트 줘"),c.Z.post("http://localhost:9000/comment/getCommentList",t).then(e=>{console.log(e.data),I(e.data.content)}).catch(e=>console.log(e))};(0,l.useEffect)(()=>{L()},[a]);let L=()=>{if(!a||!a.seq)return;let e=document.getElementById("content-".concat(a.seq));if(e){let t=new DOMParser().parseFromString(a.content,"text/html");t.querySelectorAll("oembed").forEach(e=>{let t=e.getAttribute("url");if(t&&t.includes("youtube.com")){let a=new URL(t).searchParams.get("v"),n=document.createElement("iframe");n.src="https://www.youtube.com/embed/".concat(a),n.title="video",n.allowFullscreen=!0,n.width="100%",n.height="auto",n.style.maxWidth="300px",n.style.height="180px",e.replaceWith(n)}});let n=t.getElementsByTagName("img");for(let e=0;e<n.length;e++){let t=n[e],a=t.width,l=t.height;if(a>300){let e=300/a;t.width=Math.round(a*e),t.height=Math.round(l*e)}}e.innerHTML=t.body.innerHTML,console.log("content를 html에서변환")}},P=t=>{u(!1),e.push(t)};if(!a)return(0,n.jsx)("div",{children:"봉사활동을 찾을 수 없습니다."});let A=t=>{if(a.id===T)return alert("자신이 작성한 글에는 평가를 남길 수 없습니다."),null;let n=localStorage.getItem("grantType"),l=localStorage.getItem("accessToken"),s={};null!==n&&null!==l&&(s={Authorization:"".concat(n).concat(l)}),c.Z.post("http://localhost:9000/comment/writeComment",{boardSeq:t,member_id:T,content:C,isGoodVolun:g},{headers:s}).then(a=>{console.log(a.data),e.push("/Detail?seq="+t)}).catch(e=>console.log(e)),M()},B=t=>{c.Z.post("http://localhost:9000/volunteer/deleteBoard",null,{headers:{Authorization:S+_},params:{seq:t,member_id:T}}),f(!0),setTimeout(()=>{f(!1),e.push("/FindVolunteer")},2e3)},V=t=>{e.push("/UDVolun?seq=".concat(t))},Z=e=>{let t={};null!==S&&null!==_&&(t={Authorization:"".concat(S).concat(_)}),console.log("삭제: "+e),c.Z.post("http://localhost:9000/comment/deleteComment",e,{headers:t}).then(e=>console.log(e.data)).catch(e=>console.log(e)),alert("댓글 삭제 완료"),M()};return(0,n.jsxs)("div",{className:"main-screen ".concat(h?"sidebar-open":""),onClick:h?e=>{m.current&&!m.current.contains(e.target)&&u(!1)}:void 0,children:[(0,n.jsxs)("div",{className:"sidebar",children:[(0,n.jsx)("div",{className:"sidebar-link",onClick:()=>P("/Search"),children:(0,n.jsx)("span",{children:"\uD83D\uDD0D Search"})}),!r&&(0,n.jsx)("div",{className:"sidebar-link",onClick:()=>P("/Login"),children:(0,n.jsx)("span",{children:"\uD83D\uDD12 Login"})}),r&&(0,n.jsx)("div",{className:"sidebar-link",onClick:()=>P("/Mypage"),children:(0,n.jsx)("span",{children:"\uD83D\uDC64 My Page"})}),(0,n.jsx)("div",{className:"sidebar-link",onClick:()=>P("/Chat"),children:(0,n.jsx)("span",{children:"\uD83E\uDD16 ChatBot"})})]}),(0,n.jsxs)("header",{className:"header",children:[(0,n.jsx)("div",{onClick:()=>{e.push("/Search")},style:{cursor:"pointer"},children:(0,n.jsx)(i(),{src:"/images/image-23.png",alt:"search",width:40,height:40})}),(0,n.jsx)("div",{className:"center-image-container",onClick:()=>{e.push("/First")},style:{cursor:"pointer"},children:(0,n.jsx)(i(),{className:"center-image",src:"/images/first.png",alt:"투게더!",width:120,height:45})}),(0,n.jsxs)("div",{className:"alert-container",onClick:()=>{j(!x)},style:{cursor:"pointer",position:"relative"},children:[(0,n.jsx)(i(),{src:"/images/alert.png",alt:"alert",className:"alert-icon",width:50,height:50}),x&&(0,n.jsx)("div",{className:"alert-dropdown",children:(0,n.jsxs)("ul",{children:[(0,n.jsx)("li",{children:"알림 1"}),(0,n.jsx)("li",{children:"알림 2"}),(0,n.jsx)("li",{children:"알림 3"})]})})]})]}),(0,n.jsxs)("div",{className:"content",children:[(0,n.jsx)("h1",{children:a.title}),(0,n.jsx)("p",{id:"content-".concat(a.seq)}),(0,n.jsx)("p",{children:a.volun_date}),(0,n.jsx)("p",{children:a.volun_address}),(0,n.jsxs)("p",{children:["작성자 메일 주소: ",a.email]}),a.id===T&&(0,n.jsx)("button",{onClick:()=>B(a.seq),children:"글 삭제"}),a.id===T&&(0,n.jsx)("button",{onClick:()=>V(a.seq),children:"글 수정"}),(0,n.jsxs)("div",{className:"comments",children:[(0,n.jsx)("h3",{children:"댓글:"}),(0,n.jsx)("input",{type:"text",value:C,onChange:e=>N(e.target.value),placeholder:"댓글을 입력하세요"}),(0,n.jsx)("input",{type:"radio",name:"isGood",value:"true",defaultChecked:!0,onClick:()=>p(!0)}),(0,n.jsx)(i(),{src:"/images/smile.png",alt:"true",width:20,height:20}),(0,n.jsx)("input",{type:"radio",name:"isGood",value:"false",onClick:()=>p(!1)}),(0,n.jsx)(i(),{src:"/images/sad.png",alt:"false",width:20,height:20}),(0,n.jsx)("button",{onClick:()=>A(a.seq),children:"댓글 달기"}),F.map((e,t)=>{let a=new Date(e.comment_time),l="".concat(a.getFullYear(),"-").concat((a.getMonth()+1).toString().padStart(2,"0"),"-").concat(a.getDate().toString().padStart(2,"0"));return(0,n.jsxs)("p",{className:"commentContainer",children:[(0,n.jsx)("div",{className:"comment_createTime",children:l}),(0,n.jsx)("div",{className:"comment_content",children:e.content}),e.member_id===T&&(0,n.jsx)("button",{onClick:()=>Z(e.commentSeq),children:"글 삭제"})]},e.commentSeq)})]}),a.auth&&(0,n.jsx)("p",{children:a.auth}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{className:"participate-button",onClick:()=>{b(!0),setTimeout(()=>{b(!1),window.location.href="/FindVolunteer"},2e3)},children:"참여하기"}),v&&(0,n.jsxs)("div",{className:"modal",children:[a.email,"로 신청서 내주시면 됩니다. 신청서를 낼 때는 신청자 이름, 연락처 등을 함께 제출해주시면 좋습니다."]})]}),D&&(0,n.jsx)("div",{className:"modal",children:(0,n.jsx)("div",{className:"modal-content",children:"삭제를 완료했습니다."})})]}),(0,n.jsxs)("footer",{className:"footer",children:[(0,n.jsx)("div",{className:"footer-icon",onClick:()=>{u(!h),u(!h)},children:"="}),(0,n.jsx)("div",{className:"footer-icon",onClick:()=>{e.push("/FindVolunteer")},children:"\uD83C\uDFE0"}),(0,n.jsx)("div",{className:"footer-icon",onClick:()=>{e.push("/Profile")},children:"\uD83D\uDC64"})]})]})}},449:function(){}},function(e){e.O(0,[873,702,888,774,179],function(){return e(e.s=4782)}),_N_E=e.O()}]);