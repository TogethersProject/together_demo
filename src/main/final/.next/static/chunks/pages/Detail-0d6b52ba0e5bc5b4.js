(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[428],{4782:function(e,t,a){(window.__NEXT_P=window.__NEXT_P||[]).push(["/Detail",function(){return a(4597)}])},4597:function(e,t,a){"use strict";a.r(t);var n=a(5893),s=a(7294),l=a(1163),o=a(5675),i=a.n(o);a(449);var c=a(7066);t.default=()=>{let e=(0,l.useRouter)(),{seq:t}=e.query,[a,o]=(0,s.useState)(null),[r,d]=(0,s.useState)(!1),[u,h]=(0,s.useState)(!1),m=(0,s.useRef)(null),[p,g]=(0,s.useState)(!0),[x,j]=(0,s.useState)(!1);(0,s.useEffect)(()=>{"true"===localStorage.getItem("isLoggedIn")&&d(!0)},[]);let[v,b]=(0,s.useState)(!1),[f,D]=(0,s.useState)(!1),[k,S]=(0,s.useState)(""),[C,N]=(0,s.useState)(""),[_,w]=(0,s.useState)(""),[y,T]=(0,s.useState)(""),[E,q]=(0,s.useState)({}),O=(0,s.useRef)(null);(0,s.useEffect)(()=>(x?document.addEventListener("click",L):document.removeEventListener("click",L),()=>{document.removeEventListener("click",L)}),[x]);let L=e=>{O.current&&!O.current.contains(e.target)&&j(!1)};(0,s.useEffect)(()=>{let e=localStorage.getItem("grantType"),t=localStorage.getItem("accessToken"),a=localStorage.getItem("username");a&&e&&t&&(N(e),w(t),T(a)),M(),B()},[t]);let M=()=>{c.Z.post("http://localhost:9000/volunteer/getUpdateBoard",t).then(e=>{o({title:e.data.boardDTO.title,content:e.data.boardDTO.content,seq:e.data.boardDTO.seq,email:e.data.boardDTO.email,name:e.data.boardDTO.name,id:e.data.boardDTO.id,board_time:e.data.boardDTO.board_time,board_lastTime:e.data.boardDTO.board_lastTime,volun_address:e.data.boardDTO.volun_address,volun_institution:e.data.boardDTO.volun_institution,volun_date:e.data.boardDTO.volun_date})}).catch(e=>console.log(e))},[F,I]=(0,s.useState)([]),B=()=>{console.log("코멘트 줘"),c.Z.post("http://localhost:9000/comment/getCommentList",t).then(e=>{console.log(e.data),I(e.data.content)}).catch(e=>console.log(e))};(0,s.useEffect)(()=>{A()},[a]);let A=()=>{if(!a||!a.seq)return;let e=document.getElementById("content-".concat(a.seq));if(e){let t=new DOMParser().parseFromString(a.content,"text/html");t.querySelectorAll("oembed").forEach(e=>{let t=e.getAttribute("url");if(t&&t.includes("youtube.com")){let a=new URL(t).searchParams.get("v"),n=document.createElement("iframe");n.src="https://www.youtube.com/embed/".concat(a),n.title="video",n.allowFullscreen=!0,n.width="100%",n.height="auto",n.style.maxWidth="300px",n.style.height="180px",e.replaceWith(n)}});let n=t.getElementsByTagName("img");for(let e=0;e<n.length;e++){let t=n[e],a=t.width,s=t.height;if(a>300){let e=300/a;t.width=Math.round(a*e),t.height=Math.round(s*e)}}e.innerHTML=t.body.innerHTML,console.log("content를 html에서변환")}},P=t=>{h(!1),e.push(t)};if(!a)return(0,n.jsx)("div",{children:"봉사활동을 찾을 수 없습니다."});let R=t=>{if(a.id===y)return alert("자신이 작성한 글에는 평가를 남길 수 없습니다."),null;let n=localStorage.getItem("grantType"),s=localStorage.getItem("accessToken"),l={};null!==n&&null!==s&&(l={Authorization:"".concat(n).concat(s)}),c.Z.post("http://localhost:9000/comment/writeComment",{boardSeq:t,member_id:y,content:k,isGoodVolun:p},{headers:l}).then(a=>{console.log(a.data),e.push("/Detail?seq="+t)}).catch(e=>console.log(e)),B()},V=t=>{c.Z.post("http://localhost:9000/volunteer/deleteBoard",null,{headers:{Authorization:C+_},params:{seq:t,member_id:y}}),D(!0),setTimeout(()=>{D(!1),e.push("/FindVolunteer")},2e3)},Z=t=>{e.push("/UDVolun?seq=".concat(t))},z=e=>{let t={};null!==C&&null!==_&&(t={Authorization:"".concat(C).concat(_)}),console.log("삭제: "+e),c.Z.post("http://localhost:9000/comment/deleteComment",e,{headers:t}).then(e=>console.log(e.data)).catch(e=>console.log(e)),alert("댓글 삭제 완료"),B()};return(0,n.jsxs)("div",{className:"main-screen ".concat(u?"sidebar-open":""),onClick:u?e=>{m.current&&!m.current.contains(e.target)&&h(!1)}:void 0,children:[(0,n.jsxs)("div",{className:"sidebar",children:[(0,n.jsx)("div",{className:"sidebar-link",onClick:()=>P("/Search"),children:(0,n.jsx)("span",{children:"\uD83D\uDD0D Search"})}),!r&&(0,n.jsx)("div",{className:"sidebar-link",onClick:()=>P("/Login"),children:(0,n.jsx)("span",{children:"\uD83D\uDD12 Login"})}),r&&(0,n.jsx)("div",{className:"sidebar-link",onClick:()=>P("/Mypage"),children:(0,n.jsx)("span",{children:"\uD83D\uDC64 My Page"})}),(0,n.jsx)("div",{className:"sidebar-link",onClick:()=>P("/Chat"),children:(0,n.jsx)("span",{children:"\uD83E\uDD16 ChatBot"})})]}),(0,n.jsxs)("header",{className:"header",children:[(0,n.jsx)("div",{onClick:()=>{e.push("/Search")},style:{cursor:"pointer"},children:(0,n.jsx)(i(),{src:"/images/image-23.png",alt:"search",width:40,height:40})}),(0,n.jsx)("div",{className:"center-image-container",onClick:()=>{e.push("/First")},style:{cursor:"pointer"},children:(0,n.jsx)(i(),{className:"center-image",src:"/images/first.png",alt:"투게더!",width:120,height:45})}),(0,n.jsxs)("div",{className:"alert-container",onClick:()=>{j(!x)},style:{cursor:"pointer",position:"relative"},ref:O,children:[(0,n.jsx)(i(),{src:"/images/alert.png",alt:"alert",className:"alert-icon",width:50,height:50}),x&&(0,n.jsx)("div",{className:"alert-dropdown",style:{position:"absolute",top:"60px",right:"0",backgroundColor:"white",boxShadow:"0 4px 8px rgba(0,0,0,0.1)",borderRadius:"4px"},children:(0,n.jsxs)("ul",{style:{listStyle:"none",padding:"10px",margin:"0"},children:[(0,n.jsx)("li",{style:{padding:"8px 0",borderBottom:"1px solid #ddd"},children:"알림 1"}),(0,n.jsx)("li",{style:{padding:"8px 0",borderBottom:"1px solid #ddd"},children:"알림 2"}),(0,n.jsx)("li",{style:{padding:"8px 0"},children:"알림 3"})]})})]})]}),(0,n.jsxs)("div",{className:"content",children:[(0,n.jsx)("h1",{children:a.title}),(0,n.jsx)("p",{id:"content-".concat(a.seq)}),(0,n.jsx)("p",{children:a.volun_date}),(0,n.jsx)("p",{children:a.volun_address}),(0,n.jsxs)("p",{children:["작성자 메일 주소: ",a.email]}),a.id===y&&(0,n.jsx)("button",{onClick:()=>V(a.seq),children:"글 삭제"}),a.id===y&&(0,n.jsx)("button",{onClick:()=>Z(a.seq),children:"글 수정"}),(0,n.jsxs)("div",{className:"comments",children:[(0,n.jsx)("h3",{children:"댓글:"}),(0,n.jsx)("input",{type:"text",value:k,onChange:e=>S(e.target.value),placeholder:"댓글을 입력하세요"}),(0,n.jsx)("input",{type:"radio",name:"isGood",value:"true",defaultChecked:!0,onClick:()=>g(!0)}),(0,n.jsx)(i(),{src:"/images/smile.png",alt:"true",width:20,height:20}),(0,n.jsx)("input",{type:"radio",name:"isGood",value:"false",onClick:()=>g(!1)}),(0,n.jsx)(i(),{src:"/images/sad.png",alt:"false",width:20,height:20}),(0,n.jsx)("button",{onClick:()=>R(a.seq),children:"댓글 달기"}),F.map((e,t)=>{let a=new Date(e.comment_time),s="".concat(a.getFullYear(),"-").concat((a.getMonth()+1).toString().padStart(2,"0"),"-").concat(a.getDate().toString().padStart(2,"0"));return(0,n.jsxs)("p",{className:"commentContainer",children:[(0,n.jsx)("div",{className:"comment_createTime",children:s}),(0,n.jsx)("div",{className:"comment_content",children:e.content}),e.member_id===y&&(0,n.jsx)("button",{onClick:()=>z(e.commentSeq),children:"글 삭제"})]},e.commentSeq)})]}),a.auth&&(0,n.jsx)("p",{children:a.auth}),(0,n.jsxs)("div",{children:[(0,n.jsx)("button",{className:"participate-button",onClick:()=>{b(!0),setTimeout(()=>{b(!1),window.location.href="/FindVolunteer"},2e3)},children:"참여하기"}),v&&(0,n.jsxs)("div",{className:"modal",children:[a.email,"로 신청서 내주시면 됩니다. 신청서를 낼 때는 신청자 이름, 연락처 등을 함께 제출해주시면 좋습니다."]})]}),f&&(0,n.jsx)("div",{className:"modal",children:(0,n.jsx)("div",{className:"modal-content",children:"삭제를 완료했습니다."})})]}),(0,n.jsxs)("footer",{className:"footer",children:[(0,n.jsx)("div",{className:"footer-icon",onClick:()=>{h(!u),h(!u)},children:"="}),(0,n.jsx)("div",{className:"footer-icon",onClick:()=>{e.push("/FindVolunteer")},children:"\uD83C\uDFE0"}),(0,n.jsx)("div",{className:"footer-icon",onClick:()=>{e.push("/Mypage")},children:"\uD83D\uDC64"})]})]})}},449:function(){}},function(e){e.O(0,[873,702,888,774,179],function(){return e(e.s=4782)}),_N_E=e.O()}]);